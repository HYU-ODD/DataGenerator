## DateGenerator

**Introduction**

Based on CARLA Simulator, generate KITTI 2D/3D simulated dataset in target detection dataset format. In addition to creating labels for vehicles and pedestrians, this project also creates labels for more than 20 objects(trees, traffic lights, ect).

![image](https://user-images.githubusercontent.com/55339200/138204888-18958f52-ab1a-454a-8eef-23b7d4987f37.png)

**Data Collection Flow**

![image](https://user-images.githubusercontent.com/55339200/138204862-d4863c85-418b-4e4a-8db8-9efc7029635c.png)



**Dataset Format**

training

|__   calib/    # Calibration data of camera, lidar sensors

|__   image/   # RGB image generated by camera

|__   label/   #  object labelling

|__   velodyne/  #  lidar data

|__   train.txt

|__   trainval.txt

|__   val.txt

```
label：
#Values    Name      Description
----------------------------------------------------------------------------
   1    type         Describes the type of object: 'Car','Pedestrian',
   					 'TrafficSigns', etc.
   1    truncated    Float from 0 (non-truncated) to 1 (truncated), where
                     truncated refers to the object leaving image boundaries
   1    occluded     Integer (0,1,2,3) indicating occlusion state:
                     0 = fully visible, 1 = partly occluded
                     2 = largely occluded
   1    alpha        Observation angle of object, ranging [-pi..pi]
   4    bbox         2D bounding box of object in the image (0-based index):
                     contains left, top, right, bottom pixel coordinates
   3    dimensions   3D object dimensions: height, width, length (in meters)
   3    location     3D object location x,y,z in camera coordinates (in meters)
   1    rotation_y   Rotation ry around Y-axis in camera coordinates [-pi..pi]
   1    score        Only for results: Float, indicating confidence in
                     detection, needed for p/r curves, higher is better.
```

**label type**

There are two main types of the label sets: the first is Actor(Car and Pedestrian) and the second is the environmental goals that exist on the map(None，Buildings，Fences，Other，Pedestrians，Poles，RoadLines，Roads，Sidewalks，TrafficSigns，Vegetation，Vehicles，Walls，Sky，Ground，Bridge，RailTrack，GuardRail，TrafficLight，Static，Dynamic，Water，Terrain)

**Execution**

Carla Version：carla 0.9.12, carla 0.9.13

```
python generator.py
```

SynchronyModel.py, Scenario class, responsible for setting up the client, setting up the server, generating actors, driving the server to compute and retrieve data.

Data_utils.py, which contains tool functions such as point-coordinate transformation, generating labels.

data_descriptor.py, description class in KITTI format.

DataSave.py, data class, generate saved data path, save data.

export_utils, a tool function that stores data.

image_converter.py, image format conversion function.

visual_utils, visualization tool function.

